---
sidebar_position: 1
title: iOS
id: iOS
---

## iOS Integration
### Step 1: Create an app

![Overall Process](/img/integration/createAnApp.png)

- **App name:** The name of your app
- **Store:** The platform that is divided into Android and iOS, and you should select iOS in this case.
- **App Bundle ID:** bundleID is the identifier of your app in the Apple App Store, which can be obtained by viewing your app in App Store Connect.
- **iTunesConnect App Specific Shared Secret:** The shared secret, which is needed to verify the order receipt generated by your app. For the acquisition method, please refer to: [https://help.apple.com/app-store-connect/#/devf341c0f01](https://help.apple.com/app-store-connect/#/devf341c0f01). There are two shared keys: One is the shared key for all apps; the other is a shared key for a single app. A shared key for a single app is recommended.

### Step 2: Configuration
#### Notification Receiving Configuration(<font color="red"> **Important: If you have your own receiving server, please refer to the "Configure Notification Receiving Server"**</font>)
To send Apple server notifications to Appwheel, please configure the following address


![Overall Process](/img/integration/configServerIOS.png)

to Apple Store Connect: (Currently supports V1 type notifications)
![Overall Process](/img/integration/notificationReceivingConfiguration1.png)


![Overall Process](/img/integration/notificationReceivingConfiguration2.png)

#### Configure Notification Receiving Server(optional)
▪ If you have your own notification receiving server that needs the push data, you can set the receiving server address in the AppWheel main site. We will send each message once in the order in which the messages arrive, but sometimes the messages may not be delivered in sequence, or will be transmitted multiple times. You should design the program in the way of idempotent processing.

![Overall Process](/img/integration/configServerPushIos.png)

▪ After the configuration is complete, you can test the availability of the address. The configuration must be consistent with the requirements, that is, accept the request of the POST method, return 200 Http status code after successful processing, and return 400 or 500 status code when processing fails. In addition, because there is no actual business data body in the test, the 200 http status code can be returned when empty data is received.

#### p8 file configuration for purchasing discounted products
When your app has a discount set in the Apple App Store, and you want to sync the information to AppWheel, you need to set the p8 file in AppWheel。

![Overall Process](/img/integration/p8.png)

**Service Account credentials File:** A file with a .p8 suffix, commonly called a p8 file. When you need to enable the subscription discount function, you need to have a signature for the discount, and the p8 file is an essential key to generate this signature. Obtain it through: [https://help.apple.com/app-store-connect/#/dev689c93225](https://help.apple.com/app-store-connect/#/dev689c93225])

[//]: # (#### Product Configuration)

[//]: # (- There's already a product configuration)

[//]: # (- No product configuration)

### Step 3: Setting up the Installation Environment

#### Requirements iOS 10.0 and above

#### CocoaPods
This SDK is hosted in [Cocoapods]( https://cocoapods.org/). please make sure you have installed Cocoapods and your project has been compiled and run successfully with Cocoapods before installing this SDK. If your project has been compiled and run successfully with Cocoapods and you can find Podfile in your project.

#### Import Bridging-Header.h

If your project is a Swift project, then you need to [import Objective-C into Swift](https://developer.apple.com/documentation/swift/imported_c_and_objective-c_apis/importing_objective-c_into_swift). You can find the Bridging-Header.h file in your project after importing. 

### Step 4: Install the SDK

[SDK Installation](/Installation/iOS.md)

[Configuring The SDK](/ConfiguringTheSDK/iOS)

[Displaying Products](/DisplayingProducts/iOS.md)

[Making Purchases](/MakingPurchases/iOS.md)

[Restoring Purchases](/Restoring_Purchases)

[User Benefits](/UserBenefits/iOS.md)

[Adding a Global Listener](/Adding_a_Global_Listener)



### Step 5: Acceptance Inspection
- App Configuration Check
- Whether the notification is configured successfully: Check the configuration in the AppStoreConnect backend

![Overall Process](/img/integration/appStoreConnectBackend.png)

- App configuration is as follows

![Overall Process](/img/integration/appConfiguration.png)

![Overall Process](/img/integration/addP8File.png)

- Whether the initialization interface is called at startup
- Whether the AppWheel SDK can get the information of purchased products
- Subscription Products
- Discount products (optional)
- Discount for new users
- Promotion offer
- Coupon
- Consumable products
- Non-consumable products
- Non-renewable products
- Whether the AppWheel SDK can restore product information

[//]: # (### Other steps: Integration of advanced features)

[//]: # (#### Voucher machine)

[//]: # (##### Obtain coupons)

[//]: # (Description: Developers should request coupon information as early as possible when necessary.)

[//]: # ()
[//]: # (```Objective-C)

[//]: # (AWPurchaseKit queryCouponDetail:&#40;&#40;^&#41;&#40;BOOL success,AWCouponModel * _Nullable model, AWError * _Nullable error&#41;&#41;completion)

[//]: # (```)

[//]: # ()
[//]: # ()
[//]: # (For the returned AWCouponModel data structure, please refer to document: AppWheel SDK Integration Document - Introduction to iOS Classes )

[//]: # ()
[//]: # (##### Consume coupon code)

[//]: # (Note: The developer should report the task ID to AppWheel after displaying the coupon to complete the statistics.)

[//]: # ()
[//]: # (```Objective-C)

[//]: # (AWPurchaseKit updateConponStateWithTaskId:&#40;long&#41;taskId)

[//]: # (           withCompletion:&#40;&#40;^&#41;&#40;BOOL success, AWError * _Nullable error&#41;&#41;completion)

[//]: # (```)

[//]: # ()
[//]: # ()
[//]: # (Parameter: taskId. The value of AWCouponModel, which is obtained from calling the coupon interface.)
